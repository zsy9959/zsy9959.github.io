<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="IP-20-IPv6概述," />










<meta name="description" content="前言•IPv4协议是目前广泛部署的因特网协议。在因特网发展初期，IPv4以其协议简单、易于实现、互操作性好的优势而得到快速发展。但随着因特网的迅猛发展，IPv4设计的不足也日益明显，IPv6的出现，解决了IPv4的一些弊端。 •IPv6（Internet Protocol Version 6）也被称为IPng（IP Next Generation）。它是Internet工程任务组IETF（Inte">
<meta property="og:type" content="article">
<meta property="og:title" content="IP-IPv6概述">
<meta property="og:url" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/index.html">
<meta property="og:site_name" content="zsy&#39;s blog">
<meta property="og:description" content="前言•IPv4协议是目前广泛部署的因特网协议。在因特网发展初期，IPv4以其协议简单、易于实现、互操作性好的优势而得到快速发展。但随着因特网的迅猛发展，IPv4设计的不足也日益明显，IPv6的出现，解决了IPv4的一些弊端。 •IPv6（Internet Protocol Version 6）也被称为IPng（IP Next Generation）。它是Internet工程任务组IETF（Inte">
<meta property="og:locale">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/1.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/2.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/3.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/4.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/5.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/6.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/7.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/8.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/9.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/10.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/11.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/12.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/13.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/14.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/15.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/16.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/17.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/18.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/19.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/20.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/21.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/22.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/23.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/24.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/25.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/26.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/27.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/28.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/29.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/30.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/31.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/32.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/33.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/32.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/34.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/36.png">
<meta property="og:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/37.png">
<meta property="article:published_time" content="2021-05-17T04:59:24.000Z">
<meta property="article:modified_time" content="2021-05-17T06:04:23.210Z">
<meta property="article:author" content="张思宇">
<meta property="article:tag" content="IP-20-IPv6概述">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://example.com/2021/05/17/IP-IPv6概述/"/>





  <title>IP-IPv6概述 | zsy's blog</title>
  








<meta name="generator" content="Hexo 5.4.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">zsy's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">just simple</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/home" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/mydog.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zsy's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">IP-IPv6概述</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-05-17T12:59:24+08:00">
                2021-05-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>•IPv4协议是目前广泛部署的因特网协议。在因特网发展初期，IPv4以其协议简单、易于实现、互操作性好的优势而得到快速发展。但随着因特网的迅猛发展，IPv4设计的不足也日益明显，IPv6的出现，解决了IPv4的一些弊端。</p>
<p>•IPv6（Internet Protocol Version 6）也被称为IPng（IP Next Generation）。它是Internet工程任务组IETF（Internet Engineering Task Force）设计的一套规范，是IPv4（Internet Protocol Version 4）的升级版本。</p>
<h1 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h1><p>▫描述IPv6的发展现状</p>
<p>▫阐明IPv6相较于IPv4的优势</p>
<p>▫描述IPv6的基本概念</p>
<p>▫描述IPv6报文头部的格式</p>
<p>▫描述IPv6地址格式和地址类型</p>
<p>▫实现IPv6地址以及IPv6路由的简单配置</p>
<h1 id="1-IPv6概述"><a href="#1-IPv6概述" class="headerlink" title="1.IPv6概述"></a>1.IPv6概述</h1><h2 id="IPv4现状"><a href="#IPv4现状" class="headerlink" title="IPv4现状"></a>IPv4现状</h2><p>2011年2月3日，IANA（Internet Assigned Numbers Authority，因特网地址分配组织）宣布将其最后的468万个IPv4地址平均分配到全球5个RIR（Regional Internet Registry，区域互联网注册管理机构），此后IANA再没有可分配的IPv4地址。</p>
<p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/1.png"></p>
<blockquote>
<p>•IANA，是负责全球互联网IP地址编号分配的机构。IANA将部分IPv4地址分配给大洲级的RIR，再由各RIR进行所辖区域内地址分配，五大RIR包括：</p>
<ul>
<li><p>RIPE：Reseaux IP Europeans，欧洲IP地址注册中心，服务于欧洲、中东地区和中亚地区；</p>
</li>
<li><p>LACNIC：Latin American and Caribbean Internet Address Registry，拉丁美洲和加勒比海Internet地址注册中心，服务于中美、南美以及加勒比海地区；</p>
</li>
<li><p>ARIN：American Registry for Internet Numbers，美国Internet编号注册中心，服务于北美地区和部分加勒比海地区；</p>
</li>
<li><p>AFRINIC：Africa Network Information Centre，非洲网络信息中心，服务于非洲地区；</p>
</li>
<li><p>APNIC：Asia Pacific Network Information Centre，亚太互联网络信息中心，服务于亚洲和太平洋地区。</p>
</li>
</ul>
<p>•实践证明IPv4是一个非常成功的协议，它本身也经受住了Internet从少量计算机组网发展到目前上亿台计算机互联的考验。但该协议是几十年前基于当时的网络规模而设计的。在今天看来，IPv4的设计者们对于Internet的估计和预想显得很不充分。随着Internet的扩张和新应用的不断推出，IPv4越来越显示出它的局限性。</p>
<p>•Internet规模的快速扩张是当时完全没有预料到的，特别是近十年来，更是爆炸式增长，已经走进了千家万户，人们的日常生活已经离不开它。但正因为发展太快，IP地址空间耗尽的问题迫在眉睫。</p>
<p>•20世纪90年代，IETF推出NAT（Network Address Translation，网络地址转换）与CIDR（Classless Inter Domain Routing，无类别域间路由）等技术来推迟IPv4地址耗尽发生的时间点。但是这些过渡方案只能减缓地址枯竭的速度，并不能从根本上解决问题。</p>
</blockquote>
<h2 id="全球IPv6发展现状"><a href="#全球IPv6发展现状" class="headerlink" title="全球IPv6发展现状"></a>全球IPv6发展现状</h2><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/2.png"></p>
<blockquote>
<p>•数据来源：《2019 IPv6支持度报告》——下一代互联网国家工程中心</p>
<p>•综合IPv6部署率是根据各个国家地区的网络（IPv6 Prefix/Transit IPv6 AS），IPv6网站及IPv6用户等数据按照一定权值并计算得出的IPv6部署综合情况。</p>
</blockquote>
<h2 id="Why-IPv6"><a href="#Why-IPv6" class="headerlink" title="Why IPv6 ?"></a>Why IPv6 ?</h2><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/3.png"></p>
<h2 id="IPv6优势"><a href="#IPv6优势" class="headerlink" title="IPv6优势"></a>IPv6优势</h2><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/4.png"></p>
<blockquote>
<p>•近乎无限的地址空间：与IPv4相比，这是最明显的好处。IPv6地址是由128 bit构成，单从数量级来说，IPv6所拥有的地址容量是IPv4的约8×1028倍，号称可以为全世界的每一粒沙分配一个网络地址。这使得海量终端同时在线，统一编址管理，变为可能，为万物互连提供了强有力的支撑。</p>
<p>•层次化的地址结构：正因为有了近乎无限的地址空间，IPv6在地址规划时就根据使用场景划分了各种地址段。同时严格要求单播IPv6地址段的连续性，便于IPv6路由聚合，缩小IPv6地址表规模。</p>
<p>•即插即用：任何主机或者终端要获取网络资源，传输数据，都必须有明确的IP地址。传统的分配IP地址方式是手工或者DHCP自动获取，除了上述两个方式外，IPv6还支持SLAAC（Stateless Address Autoconfiguration，无状态地址自动配置）。</p>
<p>•端到端网络的完整性：大面积使用NAT技术的IPv4网络，从根本上破坏了端到端连接的完整性。使用IPv6之后，将不再需要NAT网络设备，上网行为管理、网络监管等将变得简单，与此同时，应用程序也不需要开发复杂的NAT适配代码。</p>
<p>•安全性得到增强：IPsec（ Internet Protocol Security，因特网协议安全协议）最初是为IPv6设计的，所以基于IPv6的各种协议报文（路由协议、邻居发现等），都可以端到端地加密，当然该功能目前应用并不多。而IPv6的数据面报文安全性，跟IPv4+IPsec的能力，基本相同。</p>
<p>•可扩展性强：IPv6的扩展属性报文头部，并不是主数据包的一部分，但是在必要的时候，这些扩展头部会插在IPv6基本头部和有效载荷之间，能够协助IPv6完成加密功能、移动功能、最优路径选路、QoS等，并可提高报文转发效率。</p>
<p>•移动性改善：当一个用户从一个网段移动到另外一个网段，传统的网络会产生经典式“三角式路由”，IPv6网络中，这种移动设备的通信，可不再经过原“三角式路由”，而做直接路由转发，降低了流量转发的成本，提升了网络性能和可靠性。</p>
<p>•QoS可得到进一步增强：IPv6保留了IPv4所有的QoS属性，额外定义了20Byte 的流标签字段，可为应用程序或者终端所用，针对特殊的服务和数据流，分配特定的资源，目前该机制并没有得到充分的开发和应用。</p>
</blockquote>
<h2 id="IPv6过渡技术简介-1"><a href="#IPv6过渡技术简介-1" class="headerlink" title="IPv6过渡技术简介 (1)"></a>IPv6过渡技术简介 (1)</h2><p>•由于NAT技术的应用，缓解了IPv4地址不足产生的问题，但是部署IPv6是解决IPv4地址不足的最终方案。当前世界上不同地区对部署IPv6的需求强烈程度不一，且当前IPv4网络仍然占主流地位，因此短时间内IPv6和IPv4将会共存。</p>
<p>•IPv4网络演变为IPv6网络主要有以下三种技术：</p>
<p>​    ▫双栈技术：在一台设备上同时启用IPv4协议栈和IPv6协议栈的技术。</p>
<p>​    ▫隧道技术：将一种协议的数据封装在另一种协议中的技术。</p>
<p>​    ▫转换技术：将IPv6地址和IPv4地址进行转换的一种技术。</p>
<p>•没有最好的过渡技术方案，没有任何一种技术方案能够解决所有问题，通常是多种技术组合成不同的过渡方案，满足不同的网络访问场景。</p>
<h2 id="IPv6过渡技术简介-2"><a href="#IPv6过渡技术简介-2" class="headerlink" title="IPv6过渡技术简介 (2)"></a>IPv6过渡技术简介 (2)</h2><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/5.png"></p>
<h2 id="IPv6路由协议简介"><a href="#IPv6路由协议简介" class="headerlink" title="IPv6路由协议简介"></a>IPv6路由协议简介</h2><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/6.png"></p>
<h1 id="2-IPv6地址介绍"><a href="#2-IPv6地址介绍" class="headerlink" title="2.IPv6地址介绍"></a>2.IPv6地址介绍</h1><h2 id="IPv6地址概述"><a href="#IPv6地址概述" class="headerlink" title="IPv6地址概述"></a>IPv6地址概述</h2><h3 id="IPv6地址"><a href="#IPv6地址" class="headerlink" title="IPv6地址"></a>IPv6地址</h3><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/7.png"></p>
<h3 id="地址空间"><a href="#地址空间" class="headerlink" title="地址空间"></a>地址空间</h3><p>•为什么IPv6协议的地址长度是128bit？</p>
<ul>
<li><p>CPU处理字长发展至今分别经历了4bit、8bit、16bit、32bit、64bit等，当数据能用2的指数幂字长的二进制数表示时，CPU对数值的处理效率最高。</p>
</li>
<li><p>IPv4地址长度为32bit，原因之一就是当时互联网上的主机CPU字长为32bit。从处理效率和未来网络扩展性上考虑，将IPv6的地址长度定为128bit是十分合适的。</p>
</li>
</ul>
<p>•IPv6的128bit地址是一个什么概念？</p>
<ul>
<li><p>IPv4有（232）= 4,294,967,296个地址。</p>
</li>
<li><p>IPv6有（2128 = 296x232 ）= 340,282,366,920,938,463,463,374,607,431,768,211,456个地址(340万亿万亿万亿个地址)，相当于地球表面每平方米可以分配到67万亿个地址。</p>
</li>
<li><p>夸张的说，地球上每一粒沙子都可以分配到一个IPv6地址。</p>
</li>
</ul>
<h3 id="IPv6地址格式"><a href="#IPv6地址格式" class="headerlink" title="IPv6地址格式"></a>IPv6地址格式</h3><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/8.png"></p>
<blockquote>
<p>•IPv4地址使用点隔开的4段十进制数加上掩码来表示，例如192.168.1.1/24。IPv6的地址有128位，沿用IPv4的十进制表示方法就显得太笨拙了，所以在RFC2373中定义了不同于IPv4的格式。</p>
</blockquote>
<h3 id="IPv6地址结构"><a href="#IPv6地址结构" class="headerlink" title="IPv6地址结构"></a>IPv6地址结构</h3><p>•一个IPv6地址可以分为如下两部分：</p>
<p>​    ▫网络前缀：nbit，相当于IPv4地址中的网络ID。</p>
<p>​    ▫接口标识：（128-n）bit，相当于IPv4地址中的主机ID。</p>
<p>•IPv6单播地址示例：2001:0DB8:6101:0001:5ED9:98FF:FECA:A298/64。</p>
<p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/9.png"></p>
<h3 id="IPv6地址前缀"><a href="#IPv6地址前缀" class="headerlink" title="IPv6地址前缀"></a>IPv6地址前缀</h3><p>•鉴于IPv4地址在规划和分配上的局限性，IETF对IPv6地址类型进行了精细划分，不同类型的IPv6地址被赋予了不同的前缀，且受地址分配机构的严格管理。</p>
<p>•现阶段，常用的IPv6地址或前缀有：</p>
<p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/10.png"></p>
<blockquote>
<p>•IPv6前缀 IANA最新定义</p>
</blockquote>
<h3 id="IPv6地址接口标识"><a href="#IPv6地址接口标识" class="headerlink" title="IPv6地址接口标识"></a>IPv6地址接口标识</h3><p>•接口ID可通过三种方式生成：手工配置、系统自动生成，或基于IEEE EUI-64规范生成。</p>
<p>•其中，基于IEEE EUI-64规范自动生成接口ID的方式最为常用，该方式将接口的MAC地址转换为IPv6接口标识。</p>
<p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/11.png"></p>
<blockquote>
<p>目前有三种方式可以产生IPv6接口ID：</p>
<p>▫IEEE EUI-64规范</p>
<ul>
<li><p>接口ID的典型长度是64位，IEEE EUI-64规范给出了一个由48位MAC地址自动生成64位Interface ID的方法。</p>
</li>
<li><p>具体的转换算法为：将上述的第7bit0转换为1，在MAC地址的中间（24bit处）插入两个字节：FFFE。</p>
</li>
<li><p>这种由MAC地址产生IPv6地址接口ID的方法可以减少配置的工作量，只需要获取一个IPv6前缀就可以与接口ID形成IPv6地址。</p>
</li>
<li><p>使用这种方式最大的缺点就是某些恶意者可以通过二层MAC推算出三层IPv6地址。</p>
</li>
</ul>
<p>▫设备随机生成</p>
<ul>
<li>设备采用随机生成的方法产生一个接口ID，目前Windows操作系统使用该方式。</li>
</ul>
<p>▫手动配置</p>
<ul>
<li>顾名思义，手动配置就是人为指定接口ID来实现。</li>
</ul>
</blockquote>
<h2 id="IPv6地址类型"><a href="#IPv6地址类型" class="headerlink" title="IPv6地址类型"></a>IPv6地址类型</h2><h3 id="IPv6地址类型-1"><a href="#IPv6地址类型-1" class="headerlink" title="IPv6地址类型"></a>IPv6地址类型</h3><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/12.png"></p>
<p>•<strong>单播地址（Unicast Address）</strong>：标识一个接口，目的地址为单播地址的报文会被送到被标识的接口。在IPv6中，一个接口拥有多个IPv6地址是非常常见的现象。</p>
<p>•<strong>组播地址（Multicast Address）：</strong>标识多个接口，目的地址为组播地址的报文会被送到被标识的所有接口。只有加入相应组播组的设备接口才会侦听发往该组播地址的报文。</p>
<p>•<strong>任播地址（AnycastAddress）：</strong>任播地址标识一组网络接口（通常属于不同的节点）。目标地址是任播地址的数据包将发送给其中路由意义上最近的一个网络接口。</p>
<p>•<strong>IPv6没有定义广播地址（Broadcast Address）</strong></p>
<h3 id="IPv6常见单播地址-GUA"><a href="#IPv6常见单播地址-GUA" class="headerlink" title="IPv6常见单播地址 - GUA"></a>IPv6常见单播地址 - GUA</h3><p>GUA（Global Unicast Address，全球单播地址），也被称为可聚合全球单播地址。该类地址全球唯一，用于需要有互联网访问需求的主机，相当于IPv4的公网地址。</p>
<p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/13.png"></p>
<h3 id="IPv6常见单播地址-ULA"><a href="#IPv6常见单播地址-ULA" class="headerlink" title="IPv6常见单播地址 - ULA"></a>IPv6常见单播地址 - ULA</h3><p>ULA（Unique Local Address，唯一本地地址）是IPv6私网地址，只能够在内网中使用。该地址空间在IPv6公网中不可被路由，因此不能直接访问公网。</p>
<p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/14.png"></p>
<h3 id="IPv6常见单播地址-LLA"><a href="#IPv6常见单播地址-LLA" class="headerlink" title="IPv6常见单播地址 - LLA"></a>IPv6常见单播地址 - LLA</h3><p>LLA（Link-Local Address，链路本地地址）是IPv6中另一种应用范围受限制的地址类型。LLA的有效范围是本地链路，前缀为FE80::/10。</p>
<p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/15.png"></p>
<h3 id="IPv6组播地址"><a href="#IPv6组播地址" class="headerlink" title="IPv6组播地址"></a>IPv6组播地址</h3><p>IPv6组播地址标识某个组，目的为组播地址的报文会被送到该组播组内的成员。组播地址由前缀（FF::/8），标志（Flag）字段、范围（Scope）字段以及组播组ID（Group ID）4个部分组成。</p>
<p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/16.png"></p>
<h3 id="IPv6组播MAC"><a href="#IPv6组播MAC" class="headerlink" title="IPv6组播MAC"></a>IPv6组播MAC</h3><p>•组播IPv6报文的目的IP为组播IPv6地址，同样，目的MAC为组播MAC地址。</p>
<p>•组播MAC的前16bit为“33:33”，是专门为IPv6组播预留的MAC地址前缀。后32bit从组播IPv6地址的后32bit直接映射而来。</p>
<p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/17.png"></p>
<blockquote>
<p>•以太网传输单播IP报文的时候，目的MAC地址是下一跳的MAC地址。但是在传输组播数据包时，其目的地不再是一个具体的接收者，而是一个成员不确定的组，所以要使用组播MAC地址。</p>
<p>•IPv4组播MAC地址</p>
<ul>
<li><p>IANA规定，IPv4组播MAC地址的高24bit为0x01005E，第25bit为0，低23bit为IPv4组播地址的低23bit映射。</p>
</li>
<li><p>由于IPv4组播地址的高4bit是1110，代表组播标识，而低28bit中只有23bit被映射到IPv4组播MAC地址，这样IPv4组播地址中就有5bit信息丢失。于是，就有32个IPv4组播地址映射到了同一个IPv4组播MAC地址上，因此在二层处理过程中，设备可能要接收一些本IPv4组播组以外的组播数据，而这些多余的组播数据就需要上层进行过滤了。</p>
</li>
</ul>
<p>•IPv6组播MAC地址</p>
<ul>
<li>在以太网链路上发送IPv6组播数据包时，对应的MAC地址是0x3333-A-A-A-A，其中A-A-A-A是组播IP地址的后32bit的直接映射。</li>
</ul>
</blockquote>
<h3 id="被请求节点组播地址"><a href="#被请求节点组播地址" class="headerlink" title="被请求节点组播地址"></a>被请求节点组播地址</h3><p>当一个节点具有了单播或任播地址，就会对应生成一个被请求节点组播地址，并且加入这个组播组。该地址主要用于邻居发现机制和地址重复检测功能。被请求节点组播地址的有效范围为本地链路范围。</p>
<p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/18.png"></p>
<blockquote>
<p>•被请求节点组播地址的应用场景举例：在IPv6中，ARP及广播都被取消，当设备需要请求某个IPv6地址对应的MAC地址时，设备依然需要发送请求报文，但是该报文是一个组播报文，其目的IPv6地址是目标IPv6单播地址对应的被请求节点组播地址，由于只有目标节点才会侦听这个被请求节点组播地址，所以该组播报文可以被目标节点所接收，同时不会占用其他非目标节点的网络性能。</p>
</blockquote>
<h3 id="被请求节点组播地址-示例"><a href="#被请求节点组播地址-示例" class="headerlink" title="被请求节点组播地址 - 示例"></a>被请求节点组播地址 - 示例</h3><p>PC1发送数据至PC2前，首先需要获取其MAC地址。PC1将发起类似IPv4中ARP的解析流程，IPv6使用ICMPv6的NS及NA报文来实现地址解析过程，NS报文的目的IPv6地址为目标IPv6单播地址对应的被请求节点组播地址。</p>
<p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/19.png"></p>
<h3 id="IPv6任播地址"><a href="#IPv6任播地址" class="headerlink" title="IPv6任播地址"></a>IPv6任播地址</h3><p>任播地址标识一组网络接口（通常属于不同的节点）。任播地址可以作为IPv6报文的源地址，也可以作为目的地址。</p>
<p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/20.png"></p>
<blockquote>
<p>•任播过程涉及一个任播报文发起方和一个或多个响应方。</p>
<ul>
<li><p>任播报文的发起方通常为请求某一服务（例如，Web服务）的主机。</p>
</li>
<li><p>任播地址与单播地址在格式上无任何差异，唯一的区别是一台设备可以给多台具有相同地址的设备发送报文。</p>
</li>
</ul>
<p>•网络中运用任播地址有很多优势：</p>
<ul>
<li><p>业务冗余。比如，用户可以通过多台使用相同地址的服务器获取同一个服务（例如，Web服务）。这些服务器都是任播报文的响应方。如果不是采用任播地址通信，当其中一台服务器发生故障时，用户需要获取另一台服务器的地址才能重新建立通信。如果采用的是任播地址，当一台服务器发生故障时，任播报文的发起方能够自动与使用相同地址的另一台服务器通信，从而实现业务冗余。</p>
</li>
<li><p>提供更优质的服务。比如，某公司在A省和B省各部署了一台提供相同Web服务的服务器。基于路由优选规则，A省的用户在访问该公司提供的Web服务时，会优先访问部署在A省的服务器，提高访问速度，降低访问时延，大大提升了用户体验。</p>
</li>
</ul>
</blockquote>
<h3 id="IPv6地址和IPv4地址比较"><a href="#IPv6地址和IPv4地址比较" class="headerlink" title="IPv6地址和IPv4地址比较"></a>IPv6地址和IPv4地址比较</h3><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/21.png"></p>
<h2 id="IPv6地址规划举例"><a href="#IPv6地址规划举例" class="headerlink" title="IPv6地址规划举例"></a>IPv6地址规划举例</h2><h3 id="IPv6地址规划举例-1"><a href="#IPv6地址规划举例-1" class="headerlink" title="IPv6地址规划举例"></a>IPv6地址规划举例</h3><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/22.png"></p>
<blockquote>
<p>•地址规划设计建议：</p>
<ul>
<li>根据获取到的地址前缀，首先确定子网地址划分为几个功能块(如图中的3+3+6+N)，明确各功能块的含义、占用多少bit，避免地址浪费。</li>
</ul>
</blockquote>
<h3 id="IPv6地址使用建议"><a href="#IPv6地址使用建议" class="headerlink" title="IPv6地址使用建议"></a>IPv6地址使用建议</h3><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/23.png"></p>
<h1 id="3-IPv6报文结构"><a href="#3-IPv6报文结构" class="headerlink" title="3.IPv6报文结构"></a>3.IPv6报文结构</h1><h2 id="IPv6报文构成"><a href="#IPv6报文构成" class="headerlink" title="IPv6报文构成"></a>IPv6报文构成</h2><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/24.png"></p>
<p>IPv6报文一般由三个部分组成：</p>
<p><strong>基本报头：</strong>提供报文转发的基本信息，路由器通过解析基本报头就能完成绝大多数的报文转发任务。</p>
<p><strong>扩展报头：</strong>提供一些扩展的报文转发信息，如分段、加密等，该部分不是必需的，也不是每个路由器都需要处理，仅当需要路由器或目的节点做某些特殊处理时，才由发送方添加一个或多个扩展头。</p>
<p><strong>上层协议数据单元：</strong>一般由上层协议报头和它的有效载荷构成，该部分与IPv4的上层协议数据单元相似。</p>
<blockquote>
<p>•从图中可以看出IPv6数据报文由以下几个部分组成：</p>
<p>▫<strong>IPv6基本报头（IPv6 Header）</strong></p>
<ul>
<li><p>每一个IPv6数据报文都必须包含报头，其长度固定为40字节。</p>
</li>
<li><p>基本报头提供报文转发的基本信息，会被转发路径上的所有路由器解析。</p>
</li>
</ul>
<p>▫<strong>扩展报头（Extension Headers）</strong></p>
<ul>
<li>IPv6扩展报头是可能跟在基本IPv6报头后面的可选报头。IPv6数据包中可以包含一个或多个扩展报头，当然也可以没有扩展头，这些扩展报头可以具有不同的长度。IPv6报头和扩展报头代替了IPv4报头及其选项。新的扩展报头格式增强了IPv6的功能，使其具有极大的扩展性。与IPv4报头中的选项不同，IPv6扩展报头没有最大长度的限制，因此可以容纳IPv6通信所需要的所有扩展数据。扩展报头提供报文转发的扩展信息，并不会被路径上所有的路由器解析，一般只会被目的路由器解析处理。</li>
</ul>
<p>▫<strong>上层协议数据单元（Upper Layer Protocol Data Unit）</strong></p>
<ul>
<li>上层协议数据单元一般由上层协议报头和它的有效载荷构成，有效载荷可以是一个ICMPv6报文、一个TCP报文或一个UDP报文。 </li>
</ul>
</blockquote>
<h2 id="IPv6基本报头"><a href="#IPv6基本报头" class="headerlink" title="IPv6基本报头"></a>IPv6基本报头</h2><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/25.png"></p>
<blockquote>
<p>•IPv6基本报头也称之为固定报头。固定报头包含8个字段，总长度为40Byte。这8个字段分别为：版本（Version）、流量类型（Traffic Class）、流标签（Flow Label）、净荷长度（Payload Length）、下一个报头（Next Header）、跳数限制（Hop Limit）、源IPv6地址、目的IPv6地址。</p>
<p>•版本（Version）</p>
<p>​    ▫该字段规定了IP协议的版本，其值为6。长度为4bit。</p>
<p>•流类别（Traffic Class）</p>
<p>​    ▫该字段功能和IPv4中的服务类型功能类似，表示IPv6数据报文的类    或优先级。长度为8bit。</p>
<p>•流标签（Flow Label）</p>
<p>​    ▫与IPv4相比，该字段是新增的。它用来标识这个数据报属于源节    点和目标节点之间的一个特定数据报序列，它需要由中间IPv6路由    器进行特殊处理。该字段长度为20bit。一般来说一个流可以通过    源/目的IPv6地址和流标签来确定。</p>
<p>•有效载荷长度（Payload Length）</p>
<p>​    ▫该字段表示IPv6数据报有效载荷的长度。有效载荷是指紧跟IPv6报    头的数据报的其它部分（即扩展报头和上层协议数据单元）。该字    段长度为16bit，能表示最大长度为65535Byte的有效载荷。如果有    效载荷的长度超过这个值，该字段会置0，而有效载荷的长度用逐    跳选项扩展报头中的超大有效载荷选项来表示。</p>
<p>•下一个报头（Next Header）</p>
<p>​    ▫该字段定义紧跟在IPv6报头后面的第一个扩展报头（如果存在）    的类型，或者上层协议数据单元中的协议类型。该字段长度8bit。</p>
<p>•跳数限制（Hop Limit）</p>
<p>​    ▫该字段类似于IPv4中的TTL（Time to Live）字段。它定义了IP数    据报所能经过的最大跳数。每经过一个路由器，该数值减去1，当    该字段的值为0时，数据报将被丢弃。该字段长度为8bit。</p>
<p>•源地址（Source Address）</p>
<p>​    ▫表示发送方的地址，长度为128bit。</p>
<p>•目的地址（Destination Address）</p>
<p>​    ▫表示接收方的地址，长度为128bit。</p>
</blockquote>
<h2 id="IPv6扩展报头-1"><a href="#IPv6扩展报头-1" class="headerlink" title="IPv6扩展报头 (1)"></a>IPv6扩展报头 (1)</h2><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/26.png"></p>
<blockquote>
<p>•IPv6报头设计中对原IPv4报头所做的一项重要改进就是将所有可选字段移出IPv6报头，置于扩展头中。IPv6扩展报头是可能跟在基本IPv6报头后面的可选报头。为什么在IPv6中要设计扩展报头呢？因为在IPv4的报头中包含了所有的选项，每个中间路由器都必须检查这些选项是否存在，如果存在，就必须处理它们。这种设计方法会降低路由器转发IPv4数据包的效率。为了解决转发效率问题，在IPv6中，相关选项被移到了扩展报头中。中间路由器就不需要处理每一个可能出现的选项，这种处理方式提高了路由器处理数据包的速度，也提高了其转发性能。　　</p>
<p>•通常，一个典型的IPv6包，没有扩展头。仅当需要路由器或目的节点做某些特殊处理时，才由发送方添加一个或多个扩展头。与IPv4不同，IPv6扩展头长度任意，不受40Byte限制，以便于日后扩充新增选项，这一特征加上选项的处理方式使得IPv6选项能得以真正的利用。但是为了提高处理选项头和传输层协议的性能，扩展头总是8Byte长度的整数倍。</p>
</blockquote>
<h2 id="IPv6扩展报头-2"><a href="#IPv6扩展报头-2" class="headerlink" title="IPv6扩展报头 (2)"></a>IPv6扩展报头 (2)</h2><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/27.png"></p>
<blockquote>
<p>•目前，RFC 2460中定义了以下6个IPv6扩展头：</p>
<ul>
<li><p>逐跳选项报头：该扩展头被每一跳处理，可包含多种选项，如路由器告警选项。</p>
</li>
<li><p>目的选项报头：目的地处理， 可包含多种选项，如Mobile IPv6的家乡地址选项。</p>
</li>
<li><p>路由报头：指定源路由，类似IPv4源路由选项，IPv6源节点用来指定信息报到达目的地的路径上所必须经过的中间节点。IPv6基本报头的目的地址不是分组的最终目的地址，而是路由扩展头中所列的第一个地址。</p>
</li>
<li><p>分段报头：IP报文分片信息，只由目的地处理。</p>
</li>
<li><p>认证报头：IPSec用扩展头， 只由目的地处理。</p>
</li>
<li><p>封装安全净载报头：IPSec用扩展头，只由目的地处理。</p>
</li>
</ul>
<p>•逐跳选项扩展头和目的地选项扩展头内部提供选项功能，支持扩展性（如对移动性支持）。选项采用TLV方式。</p>
<p>•如果数据报中没有扩展报头，也就是说数据包只包含基本报头和上层协议单元，基本报头的下一个报头（Next Header）字段值指明上层协议类型。在上例中，基本报头的下一个报头字段值为6，说明上层协议为TCP；如果报文有一个扩展报头，则基本报头的下一个报头（Next Header）字段值为扩展报头类型（在上例中，指明紧跟在基本报头后面的扩展报头为43，也就是路由报头），扩展报头的下一个报头字段指明上层协议类型；以此类推，如果数据报中报括多个扩展报头，则每一个扩展报头的下一个报头指明紧跟着自己的扩展报头的类型，最后一个扩展报头的下一个报头字段指明上层协议。</p>
</blockquote>
<h1 id="4-IPv6基础配置"><a href="#4-IPv6基础配置" class="headerlink" title="4.IPv6基础配置"></a>4.IPv6基础配置</h1><h2 id="配置介绍-1"><a href="#配置介绍-1" class="headerlink" title="配置介绍 (1)"></a>配置介绍 (1)</h2><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/28.png"></p>
<h2 id="配置介绍-2"><a href="#配置介绍-2" class="headerlink" title="配置介绍 (2)"></a>配置介绍 (2)</h2><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/29.png"></p>
<h2 id="案例：配置一个双栈网络-1"><a href="#案例：配置一个双栈网络-1" class="headerlink" title="案例：配置一个双栈网络 (1)"></a>案例：配置一个双栈网络 (1)</h2><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/30.png"></p>
<p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/31.png"></p>
<h2 id="案例：配置一个双栈网络-2"><a href="#案例：配置一个双栈网络-2" class="headerlink" title="案例：配置一个双栈网络 (2)"></a>案例：配置一个双栈网络 (2)</h2><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/32.png"></p>
<p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/33.png"></p>
<h2 id="案例：配置一个双栈网络-3"><a href="#案例：配置一个双栈网络-3" class="headerlink" title="案例：配置一个双栈网络 (3)"></a>案例：配置一个双栈网络 (3)</h2><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/32.png"></p>
<p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/34.png"></p>
<h2 id="配置验证"><a href="#配置验证" class="headerlink" title="配置验证"></a>配置验证</h2><p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/36.png"></p>
<p><img src="/2021/05/17/IP-IPv6%E6%A6%82%E8%BF%B0/37.png"></p>
<h1 id="思考题"><a href="#思考题" class="headerlink" title="思考题"></a>思考题</h1><p>1.（简答题）简述IPv6相比于IPv4的优点。</p>
<p><strong>“无限”地址空间，层次化的地址结构，即插即用，简化的报文头部，安全特性，移动性，增强的QoS特性。</strong></p>
<p>2.（简答题）简述IPv6报文头相比于IPv4的不同之处。</p>
<p><strong>IPv6与IPv4的不同之处：</strong></p>
<ul>
<li><p><strong>采用了基本报头+扩展报头的报文形式。</strong></p>
</li>
<li><p><strong>取消了IP的校验：第二层和第四层的校验已经足够健壮了，因此IPv6直接取消了IP的三层校验，节省路由器处理资源。</strong></p>
</li>
<li><p><strong>取消中间节点的分片功能：中间路由器不再处理分片，只在产生数据的源节点处理，省却中间路由器为处理分片而耗费的大量CPU资源。</strong></p>
</li>
<li><p><strong>定义定长的IPv6报头：有利于硬件的快速处理，提高路由器转发效率。</strong></p>
</li>
<li><p><strong>安全选项的支持：IPv6提供了对IPSec的完美支持，如此上层协议可以省去许多安全选项。</strong></p>
</li>
<li><p><strong>增加流标签：提高QoS效率。</strong></p>
</li>
</ul>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>•IPv6作为下一代互联网协议，具备了IPv4无法比拟的诸多优点，可以完美解决现阶段IPv4无法满足的业务发展的问题。</p>
<p>•IPv6不仅仅具有庞大的地址空间，除此以外，IPv6还简化了报文头，提升了路由器报文转发效率；IPv6地址易于划分与规划，便于路由聚合；IPv6可以实现即插即用，增强了QoS等等……</p>
<p>•通过版本升级（OSPFv3）或者协议扩展（IS-IS、BGP4+），使得在IPv4网络中常用的动态路由协议在IPv6网络中仍然可以使用。</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/IP-20-IPv6%E6%A6%82%E8%BF%B0/" rel="tag"># IP-20-IPv6概述</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/05/17/IP-PIM%E5%8E%9F%E7%90%86%E4%B8%8E%E9%85%8D%E7%BD%AE/" rel="next" title="IP-PIM原理与配置">
                <i class="fa fa-chevron-left"></i> IP-PIM原理与配置
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/05/17/IP-ICMPv6%E5%92%8CNDP/" rel="prev" title="IP-ICMPv6和NDP">
                IP-ICMPv6和NDP <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/mydog.jpg"
                alt="" />
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">53</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">58</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/zsy9959" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:zsy9959@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%9B%AE%E6%A0%87"><span class="nav-number">2.</span> <span class="nav-text">目标</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-IPv6%E6%A6%82%E8%BF%B0"><span class="nav-number">3.</span> <span class="nav-text">1.IPv6概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv4%E7%8E%B0%E7%8A%B6"><span class="nav-number">3.1.</span> <span class="nav-text">IPv4现状</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%A8%E7%90%83IPv6%E5%8F%91%E5%B1%95%E7%8E%B0%E7%8A%B6"><span class="nav-number">3.2.</span> <span class="nav-text">全球IPv6发展现状</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Why-IPv6"><span class="nav-number">3.3.</span> <span class="nav-text">Why IPv6 ?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv6%E4%BC%98%E5%8A%BF"><span class="nav-number">3.4.</span> <span class="nav-text">IPv6优势</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv6%E8%BF%87%E6%B8%A1%E6%8A%80%E6%9C%AF%E7%AE%80%E4%BB%8B-1"><span class="nav-number">3.5.</span> <span class="nav-text">IPv6过渡技术简介 (1)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv6%E8%BF%87%E6%B8%A1%E6%8A%80%E6%9C%AF%E7%AE%80%E4%BB%8B-2"><span class="nav-number">3.6.</span> <span class="nav-text">IPv6过渡技术简介 (2)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv6%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E7%AE%80%E4%BB%8B"><span class="nav-number">3.7.</span> <span class="nav-text">IPv6路由协议简介</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-IPv6%E5%9C%B0%E5%9D%80%E4%BB%8B%E7%BB%8D"><span class="nav-number">4.</span> <span class="nav-text">2.IPv6地址介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv6%E5%9C%B0%E5%9D%80%E6%A6%82%E8%BF%B0"><span class="nav-number">4.1.</span> <span class="nav-text">IPv6地址概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E5%9C%B0%E5%9D%80"><span class="nav-number">4.1.1.</span> <span class="nav-text">IPv6地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4"><span class="nav-number">4.1.2.</span> <span class="nav-text">地址空间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E5%9C%B0%E5%9D%80%E6%A0%BC%E5%BC%8F"><span class="nav-number">4.1.3.</span> <span class="nav-text">IPv6地址格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E5%9C%B0%E5%9D%80%E7%BB%93%E6%9E%84"><span class="nav-number">4.1.4.</span> <span class="nav-text">IPv6地址结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E5%9C%B0%E5%9D%80%E5%89%8D%E7%BC%80"><span class="nav-number">4.1.5.</span> <span class="nav-text">IPv6地址前缀</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E5%9C%B0%E5%9D%80%E6%8E%A5%E5%8F%A3%E6%A0%87%E8%AF%86"><span class="nav-number">4.1.6.</span> <span class="nav-text">IPv6地址接口标识</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv6%E5%9C%B0%E5%9D%80%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.2.</span> <span class="nav-text">IPv6地址类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E5%9C%B0%E5%9D%80%E7%B1%BB%E5%9E%8B-1"><span class="nav-number">4.2.1.</span> <span class="nav-text">IPv6地址类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E5%B8%B8%E8%A7%81%E5%8D%95%E6%92%AD%E5%9C%B0%E5%9D%80-GUA"><span class="nav-number">4.2.2.</span> <span class="nav-text">IPv6常见单播地址 - GUA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E5%B8%B8%E8%A7%81%E5%8D%95%E6%92%AD%E5%9C%B0%E5%9D%80-ULA"><span class="nav-number">4.2.3.</span> <span class="nav-text">IPv6常见单播地址 - ULA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E5%B8%B8%E8%A7%81%E5%8D%95%E6%92%AD%E5%9C%B0%E5%9D%80-LLA"><span class="nav-number">4.2.4.</span> <span class="nav-text">IPv6常见单播地址 - LLA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E7%BB%84%E6%92%AD%E5%9C%B0%E5%9D%80"><span class="nav-number">4.2.5.</span> <span class="nav-text">IPv6组播地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E7%BB%84%E6%92%ADMAC"><span class="nav-number">4.2.6.</span> <span class="nav-text">IPv6组播MAC</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A2%AB%E8%AF%B7%E6%B1%82%E8%8A%82%E7%82%B9%E7%BB%84%E6%92%AD%E5%9C%B0%E5%9D%80"><span class="nav-number">4.2.7.</span> <span class="nav-text">被请求节点组播地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A2%AB%E8%AF%B7%E6%B1%82%E8%8A%82%E7%82%B9%E7%BB%84%E6%92%AD%E5%9C%B0%E5%9D%80-%E7%A4%BA%E4%BE%8B"><span class="nav-number">4.2.8.</span> <span class="nav-text">被请求节点组播地址 - 示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E4%BB%BB%E6%92%AD%E5%9C%B0%E5%9D%80"><span class="nav-number">4.2.9.</span> <span class="nav-text">IPv6任播地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E5%9C%B0%E5%9D%80%E5%92%8CIPv4%E5%9C%B0%E5%9D%80%E6%AF%94%E8%BE%83"><span class="nav-number">4.2.10.</span> <span class="nav-text">IPv6地址和IPv4地址比较</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv6%E5%9C%B0%E5%9D%80%E8%A7%84%E5%88%92%E4%B8%BE%E4%BE%8B"><span class="nav-number">4.3.</span> <span class="nav-text">IPv6地址规划举例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E5%9C%B0%E5%9D%80%E8%A7%84%E5%88%92%E4%B8%BE%E4%BE%8B-1"><span class="nav-number">4.3.1.</span> <span class="nav-text">IPv6地址规划举例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6%E5%9C%B0%E5%9D%80%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AE%AE"><span class="nav-number">4.3.2.</span> <span class="nav-text">IPv6地址使用建议</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-IPv6%E6%8A%A5%E6%96%87%E7%BB%93%E6%9E%84"><span class="nav-number">5.</span> <span class="nav-text">3.IPv6报文结构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv6%E6%8A%A5%E6%96%87%E6%9E%84%E6%88%90"><span class="nav-number">5.1.</span> <span class="nav-text">IPv6报文构成</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv6%E5%9F%BA%E6%9C%AC%E6%8A%A5%E5%A4%B4"><span class="nav-number">5.2.</span> <span class="nav-text">IPv6基本报头</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv6%E6%89%A9%E5%B1%95%E6%8A%A5%E5%A4%B4-1"><span class="nav-number">5.3.</span> <span class="nav-text">IPv6扩展报头 (1)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IPv6%E6%89%A9%E5%B1%95%E6%8A%A5%E5%A4%B4-2"><span class="nav-number">5.4.</span> <span class="nav-text">IPv6扩展报头 (2)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-IPv6%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="nav-number">6.</span> <span class="nav-text">4.IPv6基础配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E4%BB%8B%E7%BB%8D-1"><span class="nav-number">6.1.</span> <span class="nav-text">配置介绍 (1)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E4%BB%8B%E7%BB%8D-2"><span class="nav-number">6.2.</span> <span class="nav-text">配置介绍 (2)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E9%85%8D%E7%BD%AE%E4%B8%80%E4%B8%AA%E5%8F%8C%E6%A0%88%E7%BD%91%E7%BB%9C-1"><span class="nav-number">6.3.</span> <span class="nav-text">案例：配置一个双栈网络 (1)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E9%85%8D%E7%BD%AE%E4%B8%80%E4%B8%AA%E5%8F%8C%E6%A0%88%E7%BD%91%E7%BB%9C-2"><span class="nav-number">6.4.</span> <span class="nav-text">案例：配置一个双栈网络 (2)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E9%85%8D%E7%BD%AE%E4%B8%80%E4%B8%AA%E5%8F%8C%E6%A0%88%E7%BD%91%E7%BB%9C-3"><span class="nav-number">6.5.</span> <span class="nav-text">案例：配置一个双栈网络 (3)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E9%AA%8C%E8%AF%81"><span class="nav-number">6.6.</span> <span class="nav-text">配置验证</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%80%9D%E8%80%83%E9%A2%98"><span class="nav-number">7.</span> <span class="nav-text">思考题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">8.</span> <span class="nav-text">总结</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">张思宇</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
