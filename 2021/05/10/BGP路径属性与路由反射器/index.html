<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="IP-8-BGP路径属性与路由反射器," />










<meta name="description" content="梳理 前言•任何一条BGP路由都拥有多个路径属性（Path Attributes），当路由器通告BGP路由给它的对等体时，该路由将会携带多个路径属性，这些属性描述了BGP路由的各项特征，同时在某些场景下也会影响BGP路由优选的决策。 •IBGP水平分割规则用于防止AS内部产生环路，在很大程度上杜绝了IBGP路由产生环路的可能性，但是同时也带来了新的问题：BGP路由在AS内部只能传递一跳，如果建立I">
<meta property="og:type" content="article">
<meta property="og:title" content="BGP路径属性与路由反射器">
<meta property="og:url" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/index.html">
<meta property="og:site_name" content="zsy&#39;s blog">
<meta property="og:description" content="梳理 前言•任何一条BGP路由都拥有多个路径属性（Path Attributes），当路由器通告BGP路由给它的对等体时，该路由将会携带多个路径属性，这些属性描述了BGP路由的各项特征，同时在某些场景下也会影响BGP路由优选的决策。 •IBGP水平分割规则用于防止AS内部产生环路，在很大程度上杜绝了IBGP路由产生环路的可能性，但是同时也带来了新的问题：BGP路由在AS内部只能传递一跳，如果建立I">
<meta property="og:locale">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/1.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/2.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/3.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/4.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/5.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/6.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/7.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/8.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/9.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/10.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/11.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/12.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/13.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/14.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/15.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/16.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/17.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/18.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/19.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/20.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/21.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/22.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/23.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/24.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/25.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/26.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/27.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/28.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/29.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/30.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/31.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/32.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/33.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/34.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/35.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/36.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/37.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/38.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/39.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/40.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/41.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/42.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/43.png">
<meta property="og:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/44.png">
<meta property="article:published_time" content="2021-05-10T09:55:55.000Z">
<meta property="article:modified_time" content="2021-07-25T10:56:00.818Z">
<meta property="article:author" content="张思宇">
<meta property="article:tag" content="IP-8-BGP路径属性与路由反射器">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://example.com/2021/05/10/BGP路径属性与路由反射器/"/>





  <title>BGP路径属性与路由反射器 | zsy's blog</title>
  








<meta name="generator" content="Hexo 5.4.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">zsy's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">just simple</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/home" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/mydog.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zsy's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">BGP路径属性与路由反射器</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-05-10T17:55:55+08:00">
                2021-05-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="梳理"><a href="#梳理" class="headerlink" title="梳理"></a>梳理</h1><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8.png"></p>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>•任何一条BGP路由都拥有多个路径属性（Path Attributes），当路由器通告BGP路由给它的对等体时，该路由将会携带多个路径属性，这些属性描述了BGP路由的各项特征，同时在某些场景下也会影响BGP路由优选的决策。</p>
<p>•IBGP水平分割规则用于防止AS内部产生环路，在很大程度上杜绝了IBGP路由产生环路的可能性，但是同时也带来了新的问题：BGP路由在AS内部只能传递一跳，如果建立IBGP对等体全互联模型又会加重设备的负担。</p>
<h1 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h1><p>▫描述BGP常见的路径属性及作用</p>
<p>▫描述BGP路由反射器的概念及应用场景</p>
<p>▫描述BGP路由反射器的规则及工作机制</p>
<h1 id="BGP路径属性"><a href="#BGP路径属性" class="headerlink" title="BGP路径属性"></a>BGP路径属性</h1><h2 id="路径属性"><a href="#路径属性" class="headerlink" title="路径属性"></a><strong>路径属性</strong></h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/1.png"></p>
<p>•任何一条BGP路由都拥有多个路径属性。</p>
<p>•当路由器将BGP路由通告给它的对等体时，一并被通告的还有路由所携带的各个路径属性。</p>
<p>•BGP的路径属性将影响路由优选</p>
<h2 id="路径属性分类"><a href="#路径属性分类" class="headerlink" title="路径属性分类"></a>路径属性分类</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/2.png"></p>
<p>•公认属性是所有BGP路由器都必须能够识别的属性</p>
<p>•公认属性可以分为两类：</p>
<p>​    ▫公认必遵（Well-known Mandatory）：必须包括在每个Update消    息里。</p>
<p>​    ▫公认任意（Well-known Discretionary）：可能包括在某些Update    消息里。</p>
<p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/3.png"></p>
<p>•可选属性不需要都被BGP路由器所识别</p>
<p>•可选属性可以分为两类：</p>
<p>​    ▫可选过渡（Optional Transitive）：BGP设备不识别此类属性依然会    接受该类属性并通告给其他对等体。</p>
<p>​    ▫可选非过渡（Optional Non-transitive）：BGP设备不识别此类属性    会忽略该属性，且不会通告给其他对等体。    </p>
<blockquote>
<p>•BGP属性很多，这里仅列出常用BGP属性。</p>
</blockquote>
<h2 id="BGP-Update报文举例"><a href="#BGP-Update报文举例" class="headerlink" title="BGP Update报文举例"></a>BGP Update报文举例</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/4.png"></p>
<h2 id="AS-Path"><a href="#AS-Path" class="headerlink" title="AS_Path"></a>AS_Path</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/5.png"></p>
<p>•该属性为公认必遵属性，是前往目标网络的路由经过的AS号列表；</p>
<p>•作用：确保路由在EBGP对等体之间传递无环；另外也作为路由优选的衡量标准之一；</p>
<p>•路由在被通告给EBGP对等体时，路由器会在该路由的AS_Path中追加上本地的AS号；路由被通告给IBGP对等体时，AS_Path不会发生改变。</p>
<h2 id="AS-Path防止环路"><a href="#AS-Path防止环路" class="headerlink" title="AS_Path防止环路"></a>AS_Path防止环路</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/6.png"></p>
<p>R1从R4收到的BGP路由更新中AS_Path属性数值为：400 300 200 100，存在自身AS号，不接收该路由，从而防止了路由环路的产生。</p>
<h2 id="AS-Path影响路由优选"><a href="#AS-Path影响路由优选" class="headerlink" title="AS_Path影响路由优选"></a>AS_Path影响路由优选</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/7.png"></p>
<h2 id="AS-Path类型"><a href="#AS-Path类型" class="headerlink" title="AS_Path类型"></a>AS_Path类型</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/8.png"></p>
<blockquote>
<p>•路由聚合解决了两类问题，一是减轻了设备的负担，二是隐藏了明细的路由信息，减少了路由震荡的影响。但是路由聚合后，AS_Path属性丢失，存在产生环路的风险，为此可以通过AS_SET类型的AS_Path属性携带聚合前的AS路径信息。</p>
<p>•当发生路由聚合后，如果需要聚合路由携带所有明细路由中AS_Path属性携带的AS号防止环路，则在配置聚合的命令中增加as-set参数。</p>
<p>•在AS_SET的示例中AS 300内发生了路由聚合并配置了as-set参数，则聚合路由会将明细路由的AS_Path信息用一个AS-Set集表示（放在中括号{}里的AS号信息，该集合内的AS号没有先后顺序），在聚合路由中携带用以防止环路。</p>
<p>•除了AS_SET、AS_AS_SEQENCE之外，AS_Path还存在另外两种类型：AS_Confed_Sequence、AS_Confed_Set，这两种类型应用于BGP联邦中，本课程不涉及。</p>
</blockquote>
<h2 id="修改AS-Path"><a href="#修改AS-Path" class="headerlink" title="修改AS_Path"></a>修改AS_Path</h2><p>使用Route-Policy修改BGP路由的AS_Path属性时，可以使用以下三种方式：</p>
<p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/9.png"></p>
<h2 id="Origin"><a href="#Origin" class="headerlink" title="Origin"></a>Origin</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/10.png"></p>
<p>•该属性为公认必遵属性，它标识了BGP路由的起源。如上表所示，根据路由被引入BGP的方式不同，存在三种类型的Origin。</p>
<p>•当去往同一个目的地存在多条不同Origin属性的路由时，在其他条件都相同的情况下，BGP将按如Origin的下顺序优选路由：IGP &gt; EGP &gt; Incomplete。</p>
<h2 id="Origin在BGP表中的显示"><a href="#Origin在BGP表中的显示" class="headerlink" title="Origin在BGP表中的显示"></a>Origin在BGP表中的显示</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/11.png"></p>
<h2 id="Next-Hop"><a href="#Next-Hop" class="headerlink" title="Next_Hop"></a>Next_Hop</h2><p>•该属性是一个公认必遵属性，用于指定到达目标网络的下一跳地址。</p>
<p>•当路由器学习到BGP路由后，需对BGP路由的Next_Hop属性值进行检查，该属性值（IP地址）必须在本地路由可达，如果不可达，则这条BGP路由不可用。</p>
<p>•在不同的场景中，设备对BGP路由的缺省Next_Hop属性值的设置规则如下：</p>
<p>▫路由器将BGP路由通告给自己的EBGP对等体时，将该路由的Next_Hop设置为自己的更新源IP地址。</p>
<p>▫路由器在收到EBGP对等体所通告的BGP路由后，在将路由传递给自己的IBGP对等体时，会保持路由的Next_Hop属性值不变。</p>
<p>▫如果路由器收到某条BGP路由，该路由的Next_Hop属性值与EBGP对等体（更新对象）同属一个网段，那么该条路由的Next_Hop地址将保持不变并传递给它的BGP对等体。</p>
<h2 id="Next-Hop的缺省操作-1"><a href="#Next-Hop的缺省操作-1" class="headerlink" title="Next_Hop的缺省操作 (1)"></a>Next_Hop的缺省操作 (1)</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/12.png"></p>
<p>路由器将BGP路由通告给自己的EBGP对等体时，将该路由的Next_Hop设置为自己的TCP连接源地址。</p>
<h2 id="Next-Hop的缺省操作-2"><a href="#Next-Hop的缺省操作-2" class="headerlink" title="Next_Hop的缺省操作 (2)"></a>Next_Hop的缺省操作 (2)</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/13.png"></p>
<p>路由器在收到EBGP对等体所通告的BGP路由后，在将路由传递给自己的IBGP对等体时，会保持路由的Next_Hop属性值不变。</p>
<h2 id="Next-Hop的缺省操作-3"><a href="#Next-Hop的缺省操作-3" class="headerlink" title="Next_Hop的缺省操作 (3)"></a>Next_Hop的缺省操作 (3)</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/14.png"></p>
<p>如果路由器收到某条BGP路由，该路由的Next_Hop属性值与EBGP对等体（更新对象）同属一个网段，那么该条路由的Next_Hop地址将保持不变并传递给它的BGP对等体。</p>
<h2 id="修改Next-hop属性"><a href="#修改Next-hop属性" class="headerlink" title="修改Next_hop属性"></a>修改Next_hop属性</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/15.png"></p>
<p>使用<strong>peer next-hop-local</strong>命令可以在设置向IBGP对等体（组）通告路由时，把下一跳属性设为自身的TCP连接源地址。</p>
<blockquote>
<p>•缺省情况下，R2通告给R3的BGP路由10.0.1.0/24的NextHop属性值为10.0.12.1，若R2未将到达10.0.12.0/24的路由发布到AS200的IGP协议中，那么R3将无法获知到达10.0.12.1的路由，此时BGP路由10.0.1.0/24的NextHop不可达，该路由将被视为无效。</p>
</blockquote>
<h2 id="Local-Preference"><a href="#Local-Preference" class="headerlink" title="Local_Preference"></a>Local_Preference</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/16.png"></p>
<p>•Local_Preference即本地优先级属性，是公认任意属性，可以用于告诉AS中的路由器，哪条路径是离开本AS的首选路径。</p>
<p>•Local_Preference属性值越大则BGP路由越优。缺省的Local_Preference值为100。</p>
<p>•该属性只能被传递给IBGP对等体，而不能传递给EBGP对等体。</p>
<h2 id="在BGP路由表中查看Local-Preference"><a href="#在BGP路由表中查看Local-Preference" class="headerlink" title="在BGP路由表中查看Local_Preference"></a>在BGP路由表中查看Local_Preference</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/17.png"></p>
<p>Local_Preference为200的BGP路由优于Local_Preference为100的BGP路由，在BGP路由表中来自10.0.12.1的BGP路由为最优。</p>
<h2 id="Local-Preference注意事项"><a href="#Local-Preference注意事项" class="headerlink" title="Local_Preference注意事项"></a>Local_Preference注意事项</h2><p>•Local_Preference属性只能在IBGP对等体间传递（除非做了策略否则Local_Preference值在IBGP对等体间传递过程中不会丢失），而不能在EBGP对等体间传递，如果在EBGP对等体间收到的路由的路径属性中携带了Local_Preference，则会进行错误处理。</p>
<p>•但是可以在AS边界路由器上使用Import方向的策略来修改Local_Preference属性值。也就是在收到路由之后，在本地为路由赋予Local_Preference。</p>
<p>•使用<strong>bgp</strong> <strong>default local-preference</strong>命令修改缺省Local_Preference值，该值缺省为100。</p>
<p>•路由器在向其EBGP对等体发送路由更新时，不能携带Local_Preference属性，但是对方接收路由之后，会在本地为这条路由赋一个缺省Local_Preference值（100），然后再将路由传递给自己的IBGP对等体。</p>
<p>•本地使用<strong>network</strong>命令及<strong>import-route</strong>命令引入的路由， Local_Preference为缺省值100，并能在AS内向其他IBGP对等体传递，传递过程中除非受路由策略影响，否则Local_Preference不变。</p>
<h2 id="Community技术背景-1"><a href="#Community技术背景-1" class="headerlink" title="Community技术背景 (1)"></a>Community技术背景 (1)</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/18.png"></p>
<h2 id="Community技术背景-2"><a href="#Community技术背景-2" class="headerlink" title="Community技术背景 (2)"></a>Community技术背景 (2)</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/19.png"></p>
<h2 id="Community属性"><a href="#Community属性" class="headerlink" title="Community属性"></a>Community属性</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/20.png"></p>
<p>•Community（团体）属性为可选过渡属性，是一种路由标记，用于简化路由策略的执行。</p>
<p>•可以将某些路由分配一个特定的Community属性值，之后就可以基于Community值而不是网络前缀/掩码信息来匹配路由并执行相应的策略了。</p>
<h2 id="Community属性格式"><a href="#Community属性格式" class="headerlink" title="Community属性格式"></a>Community属性格式</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/21.png"></p>
<p>Community属性值长度为32bit，也就是4Byte。可使用两种形式呈现：</p>
<p>​    ▫十进制整数格式。</p>
<p>​    ▫AA：NN格式，其中AA表示AS号，NN是自定义的编号。</p>
<blockquote>
<p>•团体（Community）属性分为自定义团体属性和公认团体属性。</p>
</blockquote>
<h2 id="公认Community属性"><a href="#公认Community属性" class="headerlink" title="公认Community属性"></a>公认Community属性</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/22.png"></p>
<p>RFC1997（BGP Communities Attribute）定义了几个公认的Community属性值，如上表所示。</p>
<blockquote>
<p>•No_Export_Subconfed团体属性涉及到BGP联邦的概念，本课程不涉及。</p>
</blockquote>
<h2 id="MED"><a href="#MED" class="headerlink" title="MED"></a>MED</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/23.png"></p>
<p>•MED（Multi-Exit Discriminator，多出口鉴别器）是可选非过渡属性，是一种度量值，用于向外部对等体指出进入本AS的首选路径，即当进入本AS的入口有多个时，AS可以使用MED动态地影响其他AS选择进入的路径。</p>
<p>•MED属性值越小则BGP路由越优。</p>
<p>•MED主要用于在AS之间影响BGP的选路。MED被传递给EBGP对等体后，对等体在其AS内传递路由时，携带该MED值，但将路由再次传递给其EBGP对等体时，缺省不会携带MED属性。</p>
<h2 id="关于MED的一些注意事项"><a href="#关于MED的一些注意事项" class="headerlink" title="关于MED的一些注意事项"></a>关于MED的一些注意事项</h2><p>•缺省情况下，路由器只比较来自同一相邻AS的BGP路由的MED值，也就是说如果去往同一个目的地的两条路由来自不同的相邻AS，则不进行MED值的比较。</p>
<p>•一台BGP路由器将路由通告给EBGP对等体时，是否携带MED属性，需要根据以下条件进行判断（不对EBGP对等体使用策略的情况下）：</p>
<ul>
<li>如果该BGP路由是本地始发（本地通过network或import-route命令引入）的，则缺省携带MED属性发送给EBGP对等体。</li>
<li>如果该BGP路由为从BGP对等体学习到，那么该路由传递给EBGP对等体时缺省不会携带MED属性。</li>
<li>在IBGP对等体之间传递路由时，MED值会被保留并传递，除非部署了策略，否则MED值在传递过程中不发生改变也不会丢失。</li>
</ul>
<h2 id="MED的默认操作-1"><a href="#MED的默认操作-1" class="headerlink" title="MED的默认操作 (1)"></a>MED的默认操作 (1)</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/24.png"></p>
<p>•如果路由器通过IGP学习到一条路由，并通过<strong>network</strong>或<strong>import-route</strong>的方式将路由引入BGP，产生的BGP路由的MED值继承路由在IGP中的metric。例如上图中如果R2通过OSPF学习到了10.0.1.0/24路由，并且该路由在R2的全局路由表中OSPF Cost=100，那么当R2将路由network进BGP后，产生的BGP路由的MED值为100。</p>
<p>•如果路由器将本地直连、静态路由通过<strong>network</strong>或<strong>import-route</strong>的方式引入BGP，那么这条BGP路由的MED为0，因为直连、静态路由cost为0。</p>
<h2 id="MED的默认操作-2"><a href="#MED的默认操作-2" class="headerlink" title="MED的默认操作 (2)"></a>MED的默认操作 (2)</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/25.png"></p>
<p>•如果路由器通过BGP学习到其他对等体传递过来的路由，那么将路由更新给自己的EBGP对等体时，默认是不携带MED的。这就是所谓的：“MED不会跨AS传递”。例如在上图中，如果R3从R2学习到一条携带了MED属性的BGP路由，则它将该路由通告给R4时，缺省是不会携带MED属性的。</p>
<p>•可以使用default med命令修改缺省的MED值，<strong>default med</strong>命令只对本设备上用<strong>import-route</strong>命令引入的路由和BGP的聚合路由生效。例如在R2上配置<strong>default med 999</strong>，那么R2通过<strong>import-route</strong>及<strong>aggregate</strong>命令产生的路由传递给R3时，路由携带的MED为999。</p>
<h2 id="Atomic-Aggregate及Aggregator"><a href="#Atomic-Aggregate及Aggregator" class="headerlink" title="Atomic_Aggregate及Aggregator"></a>Atomic_Aggregate及Aggregator</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/26.png"></p>
<p>Atomic_Aggregate属于公认任意属性，而Aggregator属性属于可选过渡属性。</p>
<blockquote>
<p>•R3上通过<strong>aggregate</strong>命令将BGP路由10.0.1.0/24、10.0.2.0/24、10.0.3.0/24、10.0.4.0/24聚合成了10.0.0.0/16，并使用<strong>detail-suppressed</strong>抑制了明细路由的对外发布，R3只会将聚合后的BGP路由传递给R4，而不传递聚合前的明细路由。</p>
<p>•Atomic_Aggregate是一个公认自由决定属性，它只相当于一种预警标记，而并不承载任何信息。当路由器收到一条BGP路由更新且发现该条路由携带Atomic_Aggregate属性时，它便知道该条路由可能出现了路径属性的丢失，此时该路由器把这条路由再通告给其他对等体时，需保留路由的Atomic_Aggregate属性。另外，收到该路由更新的路由器不能将这条路由再度明细化。</p>
<p>•另一个重要的属性是Aggregator，这是一个可选传递属性，当路由聚合被执行时，执行路由聚合操作的路由器可以为该聚合路由添加Aggregator属性，并在该属性中记录本地AS号及自己的Router-ID，因此Aggregator属性用于标记路由聚合行为发生在哪个AS及哪台BGP路由器上</p>
</blockquote>
<h2 id="查看聚合之后的路由"><a href="#查看聚合之后的路由" class="headerlink" title="查看聚合之后的路由"></a>查看聚合之后的路由</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/27.png"></p>
<p>在BGP路由详细信息中可与看到Aggregator属性记录了聚合设备的AS号、Router ID，同时通过Atomic-Aggregate属性标明该路由为聚合路由。</p>
<h2 id="Preferred-Value介绍"><a href="#Preferred-Value介绍" class="headerlink" title="Preferred-Value介绍"></a>Preferred-Value介绍</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/28.png"></p>
<p>•Preferred-Value（协议首选值）是华为设备的特有属性，该属性仅在本地有效。当BGP路由表中存在到相同目的地的路由时，将优先选择Preferred-Value值高的路由。</p>
<p>•取值范围：0~65535；该值越大，则路由越优先。</p>
<p>•Preferred-Value只能在路由器本地配置，而且只影响本设备的路由优选。该属性不会传递给任何BGP对等体。</p>
<h2 id="在BGP路由表中查看Preferred-Value"><a href="#在BGP路由表中查看Preferred-Value" class="headerlink" title="在BGP路由表中查看Preferred-Value"></a>在BGP路由表中查看Preferred-Value</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/29.png"></p>
<p>Preferred-Value为100的BGP路由优于Preferred-Value为0的路由，在BGP路由表中来自10.0.12.1的BGP路由为最优。</p>
<blockquote>
<p>•Preferred-value在路由表中简写为PrefVal。</p>
</blockquote>
<h1 id="BGP路由反射器"><a href="#BGP路由反射器" class="headerlink" title="BGP路由反射器"></a>BGP路由反射器</h1><h2 id="中转AS中的IBGP问题"><a href="#中转AS中的IBGP问题" class="headerlink" title="中转AS中的IBGP问题"></a>中转AS中的IBGP问题</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/30.png"></p>
<p>•由于水平分割的原因，为了保证中转AS200所有的BGP路由器都能学习到完整的BGP路由，就必须在AS内实现IBGP全互联。然而实现IBGP全互联存在诸多短板：</p>
<ul>
<li><p>路由器需维护大量的TCP及BGP连接，尤其在路由器数量较多时；</p>
</li>
<li><p>AS内BGP网络的可扩展性较差。</p>
</li>
</ul>
<p>•为此可以采用路由反射器技术。</p>
<h2 id="路由反射器角色"><a href="#路由反射器角色" class="headerlink" title="路由反射器角色"></a>路由反射器角色</h2><p>•引入路由反射器之后存在两种角色：</p>
<ul>
<li><p>RR（Route Reflector）：路由反射器</p>
</li>
<li><p>Client：RR客户端</p>
</li>
</ul>
<p>•RR会将学习的路由反射出去，从而使得IBGP路由在AS内传播无需建立IBGP全互联。</p>
<p>•将一台BGP路由器指定为RR的同时，还需要指定其Client。至于Client本身，无需做任何配置，它并不知晓网络中存在RR。</p>
<p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/31.png"></p>
<h2 id="路由反射规则"><a href="#路由反射规则" class="headerlink" title="路由反射规则"></a>路由反射规则</h2><p>RR在接收BGP路由时：</p>
<p>▫如果路由反射器从自己的非客户对等体学习到一条IBGP路由，则它会将该路由反射给所有客户</p>
<p>▫如果路由反射器从自己的客户学习到一条IBGP路由，则它会将该路由反射给所有非客户，以及除了该客户之外的其他所有客户</p>
<p>▫如果路由学习自EBGP对等体，则发送给所有客户、非客户IBGP对等体。</p>
<blockquote>
<p>•当路由反射器执行路由反射时，它只将自己使用的、最优的BGP路由进行反射</p>
</blockquote>
<h2 id="反射规则示例-1"><a href="#反射规则示例-1" class="headerlink" title="反射规则示例 (1)"></a>反射规则示例 (1)</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/32.png"></p>
<p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/33.png"></p>
<h2 id="反射规则示例-2"><a href="#反射规则示例-2" class="headerlink" title="反射规则示例 (2)"></a>反射规则示例 (2)</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/34.png"></p>
<p>注意此处“反射”和“发送”的区别。“发送”指的是传统情况下（相当于RR不存在的场景下）的BGP路由传递行为，而“反射”指的是遵循路由反射规则的情况下，RR执行的路由传递动作，被反射出去的路由会被RR插入特殊的路径属性。</p>
<blockquote>
<p>•RR将路由反射时不会修改以下的BGP路径属性：Next_Hop、AS_Path、 Local_Preference、MED，如果反射器修改这几个路径属性的值则有可能产生路由环路。</p>
</blockquote>
<h2 id="RR场景下的路由防环"><a href="#RR场景下的路由防环" class="headerlink" title="RR场景下的路由防环"></a>RR场景下的路由防环</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/35.png"></p>
<p>•RR的设定使得IBGP水平分割原则失效，这就可能导致环路的产生，为此RR会为BGP路由添加两个特殊的路径属性来避免出现环路：</p>
<p>​    ▫Originator_ID</p>
<p>​    ▫Cluster_List</p>
<p>•Originator_ID、Cluster_List属性都属于可选过渡类型。</p>
<h2 id="Originator-ID"><a href="#Originator-ID" class="headerlink" title="Originator ID"></a>Originator ID</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/36.png"></p>
<p>•RR将一条BGP路由进行反射时会在反射出去的路由中增加Originator_ID，其值为本地AS中通告该路由的BGP路由器Router ID。</p>
<p>•若AS内存在多个RR，则Originator_ID属性由第一个RR创建，并且不被后续的RR（若有）所更改。</p>
<p>•当BGP路由器收到一条携带Originator_ID属性的IBGP路由，并且Originator_ID属性值与自身的Router ID相同，则它会忽略关于该条路由的更新。</p>
<h2 id="路由反射簇-Cluster"><a href="#路由反射簇-Cluster" class="headerlink" title="路由反射簇 (Cluster)"></a>路由反射簇 (Cluster)</h2><p>•路由反射簇包括反射器RR及其Client。一个AS内允许存在多个路由反射簇（如下图）。</p>
<p>•每一个簇都有唯一的簇ID（Cluster_ID，缺省时为RR的BGP Router ID ）。</p>
<p>•当一条路由被反射器反射后，该RR（该簇）的Cluster_ID就会被添加至路由的Cluster_list属性中。 </p>
<p>•当RR收到一条携带Cluster_list属性的BGP路由，且该属性值中包含该簇的Cluster_ID时，RR认为该条路由存在环路，因此将忽略关于该条路由的更新。</p>
<p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/37.png"></p>
<h2 id="Cluster-List"><a href="#Cluster-List" class="headerlink" title="Cluster_List"></a><strong>Cluster_List</strong></h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/38.png"></p>
<p>•R2发送给R1的路由，经过R1反射给R3时除了添加Originator_ID之外还会添加Cluster_List：10.0.1.1。R3再次反射给R4时， Cluster_List值为：10.0.3.3 10.0.1.1，R4再次反射给R1时Cluster_List值为：10.0.4.4 10.0.3.3 10.0.1.1。</p>
<p>•当R4将路由反射给R1时，R1发现Cluster_List包含了自身Cluster_ID，判断存在环路，从而忽略该路由更新。</p>
<h2 id="RR应用举例"><a href="#RR应用举例" class="headerlink" title="RR应用举例"></a>RR应用举例</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/39.png"></p>
<h2 id="配置介绍"><a href="#配置介绍" class="headerlink" title="配置介绍"></a><strong>配置介绍</strong></h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/40.png"></p>
<h2 id="配置案例-1"><a href="#配置案例-1" class="headerlink" title="配置案例 (1)"></a>配置案例 (1)</h2><p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/41.png"></p>
<p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/42.png"></p>
<p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/43.png"></p>
<h2 id="配置案例-2"><a href="#配置案例-2" class="headerlink" title="配置案例 (2)"></a>配置案例 (2)</h2><p>分别在R3、R1查看BGP路由10.4.4.0/24。</p>
<p><img src="/2021/05/10/BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/44.png"></p>
<h1 id="思考题"><a href="#思考题" class="headerlink" title="思考题"></a>思考题</h1><p>1.（单选题）AS_Path属性属于哪种类型的BGP属性？(   )</p>
<p>A.可选过渡</p>
<p>B.可选非过渡</p>
<p><strong>C.公认必遵</strong></p>
<p>D.公认任意</p>
<p>2.（简答题）MED值的作用是什么？是否可以跨越AS传递该属性值？</p>
<p><strong>在本AS存在多个入口时通过MED值可影响其他AS选择进入本AS的路径，MED作为可选非过渡属性，不可以跨越AS传递。</strong></p>
<p>3.（简单题）为防止环路产生，路由反射器使用了何种路径属性？</p>
<p><strong>Originator_ID、Cluster_ID</strong></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>•BGP在通告路由时会携带丰富的路径属性，这些属性描述了路由的特征，同时在某些场景下也会影响BGP的路由优选。</p>
<p>•BGP的路径属性可以分为公认属性、可选属性。对于公认属性，所有BGP路由器都必须识别；对于可选属性，不需要所有BGP路由器都能识别。</p>
<p>•为解决IBGP水平分割问题可以采用全互联的IBGP连接，但是该方式需要维护大量的IBGP对等体关系，为此可以部署RR来减少IBGP对等体关系的数量。</p>
<p>•RR的设定打破了IBGP水平分割规则，为了防止路由环路产生，BGP增加了Originator_ID、Cluster_ID两个路径属性。</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/IP-8-BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8/" rel="tag"># IP-8-BGP路径属性与路由反射器</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/05/10/BGP%E5%9F%BA%E7%A1%80/" rel="next" title="BGP基础">
                <i class="fa fa-chevron-left"></i> BGP基础
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/05/10/BGP%E8%B7%AF%E7%94%B1%E4%BC%98%E9%80%89/" rel="prev" title="BGP路由优选">
                BGP路由优选 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/mydog.jpg"
                alt="" />
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">79</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">81</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/zsy9959" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:zsy9959@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A2%B3%E7%90%86"><span class="nav-number">1.</span> <span class="nav-text">梳理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">2.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%9B%AE%E6%A0%87"><span class="nav-number">3.</span> <span class="nav-text">目标</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#BGP%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7"><span class="nav-number">4.</span> <span class="nav-text">BGP路径属性</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7"><span class="nav-number">4.1.</span> <span class="nav-text">路径属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%AF%E5%BE%84%E5%B1%9E%E6%80%A7%E5%88%86%E7%B1%BB"><span class="nav-number">4.2.</span> <span class="nav-text">路径属性分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#BGP-Update%E6%8A%A5%E6%96%87%E4%B8%BE%E4%BE%8B"><span class="nav-number">4.3.</span> <span class="nav-text">BGP Update报文举例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AS-Path"><span class="nav-number">4.4.</span> <span class="nav-text">AS_Path</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AS-Path%E9%98%B2%E6%AD%A2%E7%8E%AF%E8%B7%AF"><span class="nav-number">4.5.</span> <span class="nav-text">AS_Path防止环路</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AS-Path%E5%BD%B1%E5%93%8D%E8%B7%AF%E7%94%B1%E4%BC%98%E9%80%89"><span class="nav-number">4.6.</span> <span class="nav-text">AS_Path影响路由优选</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AS-Path%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.7.</span> <span class="nav-text">AS_Path类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9AS-Path"><span class="nav-number">4.8.</span> <span class="nav-text">修改AS_Path</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Origin"><span class="nav-number">4.9.</span> <span class="nav-text">Origin</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Origin%E5%9C%A8BGP%E8%A1%A8%E4%B8%AD%E7%9A%84%E6%98%BE%E7%A4%BA"><span class="nav-number">4.10.</span> <span class="nav-text">Origin在BGP表中的显示</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Next-Hop"><span class="nav-number">4.11.</span> <span class="nav-text">Next_Hop</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Next-Hop%E7%9A%84%E7%BC%BA%E7%9C%81%E6%93%8D%E4%BD%9C-1"><span class="nav-number">4.12.</span> <span class="nav-text">Next_Hop的缺省操作 (1)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Next-Hop%E7%9A%84%E7%BC%BA%E7%9C%81%E6%93%8D%E4%BD%9C-2"><span class="nav-number">4.13.</span> <span class="nav-text">Next_Hop的缺省操作 (2)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Next-Hop%E7%9A%84%E7%BC%BA%E7%9C%81%E6%93%8D%E4%BD%9C-3"><span class="nav-number">4.14.</span> <span class="nav-text">Next_Hop的缺省操作 (3)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9Next-hop%E5%B1%9E%E6%80%A7"><span class="nav-number">4.15.</span> <span class="nav-text">修改Next_hop属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Local-Preference"><span class="nav-number">4.16.</span> <span class="nav-text">Local_Preference</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%A8BGP%E8%B7%AF%E7%94%B1%E8%A1%A8%E4%B8%AD%E6%9F%A5%E7%9C%8BLocal-Preference"><span class="nav-number">4.17.</span> <span class="nav-text">在BGP路由表中查看Local_Preference</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Local-Preference%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">4.18.</span> <span class="nav-text">Local_Preference注意事项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Community%E6%8A%80%E6%9C%AF%E8%83%8C%E6%99%AF-1"><span class="nav-number">4.19.</span> <span class="nav-text">Community技术背景 (1)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Community%E6%8A%80%E6%9C%AF%E8%83%8C%E6%99%AF-2"><span class="nav-number">4.20.</span> <span class="nav-text">Community技术背景 (2)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Community%E5%B1%9E%E6%80%A7"><span class="nav-number">4.21.</span> <span class="nav-text">Community属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Community%E5%B1%9E%E6%80%A7%E6%A0%BC%E5%BC%8F"><span class="nav-number">4.22.</span> <span class="nav-text">Community属性格式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AC%E8%AE%A4Community%E5%B1%9E%E6%80%A7"><span class="nav-number">4.23.</span> <span class="nav-text">公认Community属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MED"><span class="nav-number">4.24.</span> <span class="nav-text">MED</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E4%BA%8EMED%E7%9A%84%E4%B8%80%E4%BA%9B%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">4.25.</span> <span class="nav-text">关于MED的一些注意事项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MED%E7%9A%84%E9%BB%98%E8%AE%A4%E6%93%8D%E4%BD%9C-1"><span class="nav-number">4.26.</span> <span class="nav-text">MED的默认操作 (1)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MED%E7%9A%84%E9%BB%98%E8%AE%A4%E6%93%8D%E4%BD%9C-2"><span class="nav-number">4.27.</span> <span class="nav-text">MED的默认操作 (2)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Atomic-Aggregate%E5%8F%8AAggregator"><span class="nav-number">4.28.</span> <span class="nav-text">Atomic_Aggregate及Aggregator</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%81%9A%E5%90%88%E4%B9%8B%E5%90%8E%E7%9A%84%E8%B7%AF%E7%94%B1"><span class="nav-number">4.29.</span> <span class="nav-text">查看聚合之后的路由</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Preferred-Value%E4%BB%8B%E7%BB%8D"><span class="nav-number">4.30.</span> <span class="nav-text">Preferred-Value介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%A8BGP%E8%B7%AF%E7%94%B1%E8%A1%A8%E4%B8%AD%E6%9F%A5%E7%9C%8BPreferred-Value"><span class="nav-number">4.31.</span> <span class="nav-text">在BGP路由表中查看Preferred-Value</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#BGP%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8"><span class="nav-number">5.</span> <span class="nav-text">BGP路由反射器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AD%E8%BD%ACAS%E4%B8%AD%E7%9A%84IBGP%E9%97%AE%E9%A2%98"><span class="nav-number">5.1.</span> <span class="nav-text">中转AS中的IBGP问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E5%99%A8%E8%A7%92%E8%89%B2"><span class="nav-number">5.2.</span> <span class="nav-text">路由反射器角色</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E8%A7%84%E5%88%99"><span class="nav-number">5.3.</span> <span class="nav-text">路由反射规则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8D%E5%B0%84%E8%A7%84%E5%88%99%E7%A4%BA%E4%BE%8B-1"><span class="nav-number">5.4.</span> <span class="nav-text">反射规则示例 (1)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8D%E5%B0%84%E8%A7%84%E5%88%99%E7%A4%BA%E4%BE%8B-2"><span class="nav-number">5.5.</span> <span class="nav-text">反射规则示例 (2)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RR%E5%9C%BA%E6%99%AF%E4%B8%8B%E7%9A%84%E8%B7%AF%E7%94%B1%E9%98%B2%E7%8E%AF"><span class="nav-number">5.6.</span> <span class="nav-text">RR场景下的路由防环</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Originator-ID"><span class="nav-number">5.7.</span> <span class="nav-text">Originator ID</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%8F%8D%E5%B0%84%E7%B0%87-Cluster"><span class="nav-number">5.8.</span> <span class="nav-text">路由反射簇 (Cluster)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Cluster-List"><span class="nav-number">5.9.</span> <span class="nav-text">Cluster_List</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RR%E5%BA%94%E7%94%A8%E4%B8%BE%E4%BE%8B"><span class="nav-number">5.10.</span> <span class="nav-text">RR应用举例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E4%BB%8B%E7%BB%8D"><span class="nav-number">5.11.</span> <span class="nav-text">配置介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%A1%88%E4%BE%8B-1"><span class="nav-number">5.12.</span> <span class="nav-text">配置案例 (1)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%A1%88%E4%BE%8B-2"><span class="nav-number">5.13.</span> <span class="nav-text">配置案例 (2)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%80%9D%E8%80%83%E9%A2%98"><span class="nav-number">6.</span> <span class="nav-text">思考题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">7.</span> <span class="nav-text">总结</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">张思宇</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
